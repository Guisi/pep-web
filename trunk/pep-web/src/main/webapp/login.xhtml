<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:utils="http://java.sun.com/jsf/composite/utils">
	
	<h:head>
		<title>#{msg['general.app.title']}</title>
	</h:head>
	
	<h:outputStylesheet library="css" name="estilos.css"  />
	<h:outputScript library="js" name="pep.js"/>
	<h:outputScript library="js" name="locales.js"/>
	
	<h:body>
		<div id="logindiv" align="center">
			<p:panel style="width: 100%; padding: 15px 0px 25px 0px">
				<div id="headerBoxLogin">
					<span>
						<h:outputText value="#{msg['general.app.title']}"/>
					</span>
				</div>				
				<h:form prependId="false">
					
					<div style="width: 360px;">
		                <h:panelGroup layout="block" rendered="#{not empty loginMBean.mensagem}">
				            <h:outputText value="#{loginMBean.viewBean.mensagem}" escape="false"/>
				        </h:panelGroup>

						<p:messages id="msgLogin"/>
					</div>
		            
					<p:focus for="j_username"/>
					<p:watermark for="j_username" value="#{msg['login.campo.email']}" />
					<p:watermark for="j_password" value="#{msg['login.campo.senha']}" />
					
					<div align="center">
						<p:inputText id="j_username" value="#{loginMBean.login}" maxlength="50" 
							required="true" requiredMessage="#{msg['login.erro.campoobrigatorio.email']}" style="width: 350px;"/>
		
						<p:password id="j_password" maxlength="20" style="width: 350px; margin-top: 10px;"
							required="true" requiredMessage="#{msg['login.erro.campoobrigatorio.senha']}"/>
						<p:commandButton id="btEntrar" value="#{msg['login.botao.entrar']}" action="#{loginMBean.processLogin}" 
	                				 ajax="false" process="@this, j_username, j_password" update="@form" style="width: 360px; margin-top: 10px; margin-left: 1px;"/>
					</div>
					
					<!-- Esqueci minha senha -->
			        <div align="left" style="width: 360px; margin-top: 20px;">
			        	<p:commandLink value="#{msg['login.esqueceusenha']}" onclick="dlgSolicitarAltSenha.show();" actionListener="#{loginMBean.limparMessages}" process="@this"/>
			        </div>
				</h:form>
			</p:panel>
		</div>
		
		<p:dialog widgetVar="dlgSolicitarAltSenha" modal="true" closable="true" resizable="false" draggable="false" header="#{msg['login.solicitaralteracaosenha.header']}" width="500">
			<h:form id="frmSolicitarAltSenha">
				<p:messages id="msgSolicitarAltSenha"/>
			
				<p:panelGrid columns="2" styleClass="noborder" columnClasses="rightAligned, valueColumn" style="width: 100%;">
					<h:outputLabel for="itEmail" value="#{msg['login.campo.email']}: "/>
					<p:inputText id="itEmail" value="#{loginMBean.loginAlteracao}" maxlength="50" 
								required="true" requiredMessage="#{msg['login.erro.campoobrigatorio.email']}" style="width: 350px;"/>
				</p:panelGrid>
				
				<div class="divBotoesEdicao">
						<p:commandButton value="#{msg['botao.cancelar']}" onclick="dlgSolicitarAltSenha.hide();" icon="ui-icon-close"/>
						<p:commandButton value="#{msg['botao.solicitar']}" update="msgSolicitarAltSenha" action="#{loginMBean.solicitarAlteracaoSenha}"
							icon="ui-icon-check" styleClass="botaoSalvar" oncomplete="handleModalDialogSubmit(dlgSolicitarAltSenha, status, args);"/>
					</div>
			</h:form>
		</p:dialog>
	</h:body>
</html>