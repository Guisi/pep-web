<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/base.xhtml">

	<ui:define name="content">
		<p:panel>
			<h:form id="frmUsuarios" enctype="multipart/form-data">
				<p:messages id="msgs"/>

				<fieldset>
					<legend>#{msg['usuario.editar.header']}</legend>
					
					<h:panelGrid id="pngMenuLateral" columns="2" columnClasses="leftMenu, rightContent" style="width: 100%;">
						<p:column style="width: 150px;">
							<p:graphicImage id="giImagemFoto" value="#{editarUsuarioMBean.imagemFoto}"/>
							<div style="height: 200px;">
								<p:fileUpload id="flimagemUsuario" value="#{editarUsuarioMBean.imagemFotoFileUpload}" mode="advanced"
									fileUploadListener="#{editarUsuarioMBean.onImagemFotoSelecionada}"
									label="#{msg['usuario.botao.alterarimagem']}"
									auto="true"
									update="giImagemFoto"/>
							</div>
							<div>
								<p:menu>
						            <p:menuitem value="#{msg['usuario.editar.dadosprincipais']}" update="panelUsuarioInclude, msgs">
						            	 <f:setPropertyActionListener target="#{editarUsuarioMBean.menuInclude}" value="dadosPrincipaisInclude.xhtml"/>
						            </p:menuitem>
							    </p:menu>
							    
							    <p:menu style="margin-top: 5px;">
						            <p:menuitem value="#{msg['usuario.editar.perfis']}" actionListener="#{editarUsuarioMBean.listarPerfisDisponiveis}" update="panelUsuarioInclude, msgs">
						            	 <f:setPropertyActionListener target="#{editarUsuarioMBean.menuInclude}" value="perfisUsuarioInclude.xhtml"/>
						            </p:menuitem>
							    </p:menu>
							    
							    <p:menu style="margin-top: 5px;" rendered="#{editarUsuarioMBean.possuiEspecialidades}">
						            <p:menuitem value="#{msg['usuario.editar.especialidades']}" actionListener="#{editarUsuarioMBean.listarEspecialidadesDisponiveis}" update="panelUsuarioInclude, msgs">
						            	 <f:setPropertyActionListener target="#{editarUsuarioMBean.menuInclude}" value="especialidadesUsuarioInclude.xhtml"/>
						            </p:menuitem>
							    </p:menu>
							    
							    <p:menu style="margin-top: 5px;" rendered="#{editarUsuarioMBean.possuiConvenios}">
						            <p:menuitem value="#{msg['usuario.editar.convenios']}" actionListener="#{editarUsuarioMBean.listarConveniosDisponiveis}" update="panelUsuarioInclude, msgs">
						            	 <f:setPropertyActionListener target="#{editarUsuarioMBean.menuInclude}" value="conveniosUsuarioInclude.xhtml"/>
						            </p:menuitem>
							    </p:menu>
							</div>
						</p:column>
						
						<p:column>
							<p:panel id="panelUsuarioInclude">
								<ui:include src="#{editarUsuarioMBean.menuInclude != null ? editarUsuarioMBean.menuInclude : 'dadosPrincipaisInclude.xhtml'}" />
							</p:panel>
						</p:column>
					</h:panelGrid>
					
					<div class="divBotoesEdicao">
						<p:commandButton value="#{msg['botao.cancelaralteracoes']}" action="pretty:listarUsuarios" icon="ui-icon-close" immediate="true"/>
						<p:commandButton value="#{msg['botao.salvaralteracoes']}" update="msgs" action="#{editarUsuarioMBean.salvar}" 
							icon="ui-icon-check" styleClass="botaoSalvar"/>
					</div>
				</fieldset>
			</h:form>
		</p:panel>
	</ui:define>
</ui:composition>